<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pote com 365 Motivos</title>
  <link href="https://fonts.googleapis.com/css2?family=Parisienne&display=swap" rel="stylesheet">
  <style>
    /* Reset básico e fonte */
    body, html {
      margin: 0; padding: 0;
      font-family: 'Arial', sans-serif;
      background: #fff0f5;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
    }
    /* Container principal centralizado e responsivo */
    #main-container {
      max-width: 540px;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }

    /* Título */
    #tituloContainer {
      text-align: center;
      color: #ff3366;
      font-size: 2.5rem;
      font-weight: bold;
      user-select: none;
      font-family: 'Parisienne', cursive; /* Fonte adicionada aqui */
}  
    
    

    /* Imagem - centralizada e responsiva */
    #imagemContainer img {
      max-width: 100%;
      height: auto;
      border-radius: 12px;
      user-select: none;
    }

    /* Texto descritivo */
    #textoContainer {
      color: #333;
      font-size: 1rem;
      text-align: justify;
      line-height: 1.4;
      padding: 0 10px;
      user-select: none;
    }

    /* Container do pote */
    #poteContainer {
      position: relative;
      width: 100%;
      max-width: 500px;
      aspect-ratio: 5 / 7; /* 500 x 700 */
      user-select: none;
    }

    /* Canvas e divs dentro do pote */
    #canvas-container {
      position: relative;
      width: 100%;
      height: 100%;
    }
    canvas {
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      background: #fff;
      width: 100% !important;
      height: 100% !important;
      display: block;
    }
   
    #fraseAberta {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: #ff3366;
      color: white;
      padding: 10px 15px;
      border-radius: 6px;
      font-size: 1.1rem;
      min-width: 250px;
      max-width: 90%;
      text-align: center;
      display: none;
      z-index: 10;
      word-wrap: break-word;
      user-select: text;
    }
    #poteVisual {
      position: absolute;
      width: 68%; /* 340/500 */
      height: 88.5%; /* 620/700 */
      top: 5.7%; /* 40/700 */
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid #ff708d;
      border-top: none;
      border-radius: 0 0 30px 30px;
      z-index: 1;
      pointer-events: none;
      box-sizing: border-box;
    }

    /* Botões, agora dentro do main, abaixo do pote */
    #botoesControles {
      display: flex;
      gap: 10px;
      justify-content: center;
      width: 100%;
      max-width: 500px;
      user-select: none;
    }
    #botoesControles button {
      flex: 1;
      padding: 10px 0;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      color: white;
      font-weight: bold;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }
    #btnLimpar {
      background: #ff3366;
    }
    #btnLimpar:hover {
      background: #e52a5b;
    }
    #btnMostrar {
      background: #ff708d;
    }
    #btnMostrar:hover {
      background: #e0637c;
    }

    /* Modal Styles */
    #modalFundo {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(5px);
      z-index: 100;
      justify-content: center;
      align-items: center;
    }
    #modalConteudo {
  background: white;
  padding: 20px;
  width: 90vw;
  max-width: 600px;
  max-height: 80vh;
  border-radius: 10px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  overflow-y: auto;
  white-space: pre-wrap;
  font-size: 16px;
  color: #333;
  position: relative;
  box-sizing: border-box;
  text-align: center;
}

@media (max-width: 480px) {
  #modalConteudo {
    width: 95vw;
    padding: 15px;
    font-size: 14px;
  }
}
#listaFrases {
  white-space: pre-wrap;
  word-wrap: break-word;
  overflow-wrap: break-word;
  line-height: 2;
  max-width: 100%;
}
.fundoTransparente {
  background-color: transparent;
  padding: 5px 10px;
  border-radius: 6px;
  margin-bottom: 6px;
}

.fundoEscuro {
  background-color: rgba(187, 187, 187, 0.15); /* rosa clarinho translúcido */
  padding: 5px 10px;
  border-radius: 6px;
  margin-bottom: 6px;
}

    #modalFechar {
      position: absolute;
      top: 8px;
      right: 12px;
      background: transparent;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #999;
      transition: color 0.3s;
    }
    #modalFechar:hover {
      color: #ff3366;
    }

    /* Responsividade básica */
    @media (max-width: 600px) {
      #tituloContainer {
        font-size: 1.5rem;
      }
      #textoContainer {
        font-size: 0.9rem;
      }
      #botoesControles button {
        font-size: 0.9rem;
        padding: 8px 0;
      }
    }
  </style>
</head>
<body>
  <div id="main-container">
    <div id="tituloContainer">
      365 Motivos para Amar Você
    </div>

    <div id="imagemContainer">
      <!-- Substitua pelo caminho da imagem desejada -->
      <img src="imagem/flork-apaixonado2(1).png" alt="Imagem romântica do pote" />
    </div>

    <div id="textoContainer">
      Feliz dia dos namoradosss!! eu fiquei em dúvida do que dar de presente, já que você é uma pessoa bemmm chatinha e indecisa. Por isso criei esse pote, dentro dele tem 365 motivos do porquê eu te amo. <br>Cada motivo está separado em um desses quadradinhos, que voce pode ir tirando. Se quiser ver os motivos que ja tirou é so clicar no botão "ver frases sorteadas"
    </div>

    <div id="poteContainer">
      <div id="canvas-container">
        <div id="fraseAberta"></div>
        <div id="poteVisual"></div>
        <canvas id="world"></canvas>
      </div>
    </div>

    <div id="botoesControles">
      <button id="btnLimpar">Limpar Progresso</button>
      <button id="btnMostrar">Ver Frases Sorteadas</button>
    </div>
  </div>

  <!-- Modal -->
  <div id="modalFundo">
    <div id="modalConteudo">
      <button id="modalFechar">&times;</button>
      <h2>Frases Sorteadas</h2>
      <div id="listaFrases"></div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
  <script>
    const { Engine, Render, Runner, Bodies, Composite, Mouse, MouseConstraint, Events } = Matter;

    const frases = [
      "Eu amo você porque você sempre me faz sorrir.",
      "Eu amo você porque o seu abraço me traz paz.",
      "Eu amo você porque você acredita em mim mesmo quando eu duvido.",
      "Eu amo você porque sua risada é a música mais doce para mim.",
      "Eu amo você porque você me inspira a ser uma pessoa melhor.",
      "Eu amo você porque você sempre me faz sorrir.",
      "Eu amo você porque o seu abraço me traz paz.",
      "Eu amo você porque você acredita em mim mesmo quando eu duvido.",
      "Eu amo você porque sua risada é a música mais doce para mim.",
      // ... até a frase 365
      
    ];

    const engine = Engine.create();
    const world = engine.world;

    // Ajustar largura e altura do canvas baseado no tamanho do poteContainer
    const poteContainer = document.getElementById('poteContainer');
    const width = 500;
    const height = 700;

    const canvas = document.getElementById('world');
    canvas.width = width;
    canvas.height = height;

    const render = Render.create({
      canvas: canvas,
      engine: engine,
      options: { width, height, wireframes: false, background: '#ffffff' }
    });

    Render.run(render);
    const runner = Runner.create();
    Runner.run(runner, engine);

    // Estrutura física do pote
    const poteEsquerda = Bodies.rectangle(width/2 - 150, height/2 + 10, 2, 700, {
      isStatic: true,
      render: { visible: false }
    });

    const poteDireita = Bodies.rectangle(width/2 + 150, height/2 + 10, 2, 700, {
      isStatic: true,
      render: { visible: false }
    });

    const poteFundo = Bodies.rectangle(width/2, height - 30, 350, 60, {
      isStatic: true,
      render: { visible: false }
    });

    const poteTopo = Bodies.rectangle(width/2, 35, 320, 10, {
      isStatic: true,
      render: { visible: false }
    });

    Composite.add(world, [poteEsquerda, poteDireita, poteFundo, poteTopo]);

    // Criar papeis
    const papelWidthBase = 50;
    const papelHeightBase = 25;
    const minX = width/2 - 140;
    const maxX = width/2 + 140;
    const minY = height - 150;
    const maxY = height - 80;

    const papeis = [];
    let indicesRestantes = Array.from(Array(frases.length).keys());

    // LocalStorage de frases sorteadas
    let frasesSorteadas = [];

    // Função para criar papel com tamanho randomizado (variação ±20%)
    function criarPapel(indiceFrase) {
      const x = Math.random() * (maxX - minX) + minX;
      const y = Math.random() * (maxY - minY) + minY;
      const angle = (Math.random() - 0.5) * 0.8;

      const widthVar = papelWidthBase * (0.8 + Math.random() * 0.4);
      const heightVar = papelHeightBase * (0.8 + Math.random() * 0.4);

      let papel = Bodies.rectangle(x, y, widthVar, heightVar, {
        restitution: 0.1,
        friction: 2,
        angle: angle,
        render: {
          fillStyle: '#ffffff', // branco
          strokeStyle: '#ff3366',
          lineWidth: 2
        },
        label: `papel-${indiceFrase}`,
        customIndex: indiceFrase
      });

      Composite.add(world, papel);
      papeis.push(papel);
    }

    // Carregar frases sorteadas do localStorage
    const dadosSalvos = localStorage.getItem('frasesSorteadas');
    if (dadosSalvos) {
      frasesSorteadas = JSON.parse(dadosSalvos);
      indicesRestantes = indicesRestantes.filter(i => !frasesSorteadas.includes(i));
    }

    // Criar papeis iniciais
    function criarPapelComY(indiceFrase, y) {
  const x = Math.random() * (maxX - minX) + minX;
  const angle = (Math.random() - 0.5) * 0.8;

  const widthVar = papelWidthBase * (0.8 + Math.random() * 0.4);
  const heightVar = papelHeightBase * (0.8 + Math.random() * 0.4);

  let papel = Bodies.rectangle(x, y, widthVar, heightVar, {
    restitution: 0.1,
    friction: 1,  // um pouco mais de atrito
    angle: angle,
    render: {
      fillStyle: '#afafa',
      strokeStyle: '#c9c9c9',
      lineWidth: 1
    },
    label: `papel-${indiceFrase}`,
    customIndex: indiceFrase
  });

  Composite.add(world, papel);
  papeis.push(papel);
}
const quantidadeInicial = Math.min(150, indicesRestantes.length);

for (let i = 0; i < quantidadeInicial; i++) {
  const randIndex = Math.floor(Math.random() * indicesRestantes.length);
  const indiceFrase = indicesRestantes.splice(randIndex, 1)[0];

  const yMax = height - 300;
  const yMin = height - 500;
  const y = yMin + ((yMax - yMin) * (i / quantidadeInicial));

  criarPapelComY(indiceFrase, y);
}

    const fraseAberta = document.getElementById('fraseAberta');
    const mouse = Mouse.create(canvas);
    const mouseConstraint = MouseConstraint.create(engine, {
      mouse: mouse,
      constraint: { stiffness: 0.2, render: { visible: false } }
    });

    Composite.add(world, mouseConstraint);

    Events.on(mouseConstraint, 'mousedown', function(event) {
      const mousePos = event.mouse.position;

      for(let i = papeis.length - 1; i >= 0; i--) {
        const papel = papeis[i];
        if (Matter.Bounds.contains(papel.bounds, mousePos) && Matter.Vertices.contains(papel.vertices, mousePos)) {
          const indiceFrase = papel.customIndex;
          fraseAberta.textContent = frases[indiceFrase];
          fraseAberta.style.display = 'block';

          Composite.remove(world, papel);
          papeis.splice(i,1);

          frasesSorteadas.push(indiceFrase);
          localStorage.setItem('frasesSorteadas', JSON.stringify(frasesSorteadas));

          if (indicesRestantes.length > 0) {
            const randIndex = Math.floor(Math.random() * indicesRestantes.length);
            const novoIndice = indicesRestantes.splice(randIndex, 1)[0];
            criarPapel(novoIndice);
          }

          setTimeout(() => {
            fraseAberta.style.display = 'none';
          }, 3500);

          break;
        }
      }
    });

    // Botões limpar progresso e mostrar frases
    document.getElementById('btnLimpar').addEventListener('click', () => {
      if(confirm('Deseja realmente limpar o progresso? Isso não pode ser desfeito.')) {
        localStorage.removeItem('frasesSorteadas');
        location.reload();
      }
    });

    const modalFundo = document.getElementById('modalFundo');
    const modalFechar = document.getElementById('modalFechar');
    const listaFrases = document.getElementById('listaFrases');

   document.getElementById('btnMostrar').addEventListener('click', () => {
  if(frasesSorteadas.length === 0) {
    listaFrases.innerHTML = '<div>Nenhuma frase sorteada ainda.</div>';
  } else {
    let html = '';
    frasesSorteadas.forEach((indice, i) => {
      const classe = (i % 2 === 0) ? 'fundoTransparente' : 'fundoEscuro';
      html += `<div class="${classe}">• ${frases[indice]}</div>`;
    });
    listaFrases.innerHTML = html;
  }
  modalFundo.style.display = 'flex';
});
    modalFechar.addEventListener('click', () => {
      modalFundo.style.display = 'none';
    });

    modalFundo.addEventListener('click', (e) => {
      if(e.target === modalFundo) modalFundo.style.display = 'none';
    });

  </script>
</body>
</html>
